
@(datas: List[models.ScrappedData])(sname: List[String])(dateFilter:List[String])
@main("") {
<head>
	<script type="text/javascript" src='@routes.Assets.at("javascripts/jquery-1.9.0.min.js")'></script>
	<script src='@routes.Assets.at("javascripts/bootstrap.js")'></script>
	<link  href='@routes.Assets.at("stylesheets/bootstrap.css")' rel="stylesheet">
	<link  href='@routes.Assets.at("stylesheets/main.css")' rel="stylesheet">
</head>	
	<form class="form-horizontal" name="input" action="loadData" method="get">
		<select name = "site">
				 @for(data <- sname) {
			    	@if(!data.isEmpty || data.length > 0 ) {
			    		<option  value="@data">@data</option>	
			    	}
			    }
			</select>
		<!--  <select name = "dateFilter">
				 @for(data <- dateFilter) {
			    	@if(data != null ) {
			    		<option  value="@data">@data</option>	
			    	}
			    }
			</select> -->
			<select name = "approvedstatus">
	    		<option value="1">Approved</option>
	    		<option value="0">Not-Approved</option>
			</select>	
	<input type="submit" value="Submit">
	</form>
	<!-- <form class="form-horizontal" role="form">
		<div style = "margin-top: 2%;" "class="form-group">
			
			<button type="submit" onClick = "loadData()" class="btn btn-default" data-dismiss="modal">Submit</button>
		</div>
	</form> -->
	<table class="table table-striped table-bordered">
    @for(data <- datas) {
    	@if(!data.name.isEmpty || data.name.length > 0) {
    		<tr id="@data.id">
    			<td>
    				@if(data.status == true) {
    					<input type="checkbox" value="@data.id" onclick="myfunc(@data.id)" checked>
    				}
    				@if(data.status == false) {
    					<input type="checkbox" value="@data.id" onclick="myfunc(@data.id)">
    				}
    			</td>
    			<td>
    				<a href="@data.link">
    						<img style =  "height: 150px;" alt="" src="@data.image">
    						@data.name
    						At @data.site
    				</a>
    			</td>
    			<td>
    				Price: @data.regularPrice
    				<br>
    				Special Price: @data.specialPrice
    			</td>
    			<td>
    				@if(data.status == true) {
    				<input type="button" value="Update" id="updatebutton" data-toggle="modal" data-target="#myModal" onclick="myfunc(@data.id)">
    				}
    				@if(data.status == false) {
    				<input type="button" value="Approve" id="approvebutton" data-toggle="modal" data-target="#myModal" onclick="myfunc(@data.id)">
    				}
    			</td>
    		</tr>
    	}
    }
    </table>
}


<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
      <div id='TextBoxesGroup'>
	  		<div id="TextBoxDiv1" class="submitform">
	  			<label>Name</label>
      			<input type="text" id="pdname" name="pdname" required>
	  			<label>SKU</label>
      			<input type="text" id="pdsku" name="pdsku" required>
	  			<label>Description</label>
      			<textarea id="pddesc" name="pddesc" required></textarea>
	  			<label>Weight</label>
      			<input type="text" id="pdweight" name="pdweight" required>
	  			<label>Status</label>
      			<select id="pdselect" name="pdselect">
      				<option value="Enable">Enable</option>
      				<option value="Disable">Disable</option>
      			</select>
	  			<label>Visibility</label>
      			<select id="pdvisible" name="pdvisible">
      				<option value="Visible">Visible</option>
      				<option value="Hidden">Hidden</option>
      			</select>
	  			<label>Short Description</label>
      			<textarea id="pdshortdesc" name="pdshortdesc" required></textarea>
	  			<label>Search</label>
      			<input type="text" id="pdsearch" name="pdsearch" required>
	  			<label>Quantity</label>
      			<input type="text" id="pdquantity" name="pdquantity" required>
	  			<label>Price</label>
      			<input type="text" id="pdprice" name="pdprice" required>
	  			<label>Meta Description</label>
      			<textarea id="pdmetadesc" name="pdmetadesc" required></textarea>
	  			<label>Tax Class</label>
      			<input type="text" id="pdtaxclass" name="pdtaxclass" required>
	  			<label>Categories</label>
      			<input type="text" id="pdcategories" name="pdcategories" required>
	  			<label>Meta Title</label>
      			<input type="text" id="pdmetatitle" name="pdmetatitle" required>
	  			<label>Meta Keywords</label>
      			<input type="text" id="pdmetakeywords" name="pdmetakeywords" required>
	  			<label>Images</label>
      			<input type="text" id="pdimages" name="pdimages" required>
      		</div>
      </div>		
        <!-- <input type="button" class="btn" id="addButton" value="Add"> -->
      </div>
      <div class="modal-footer">
      	<label id="successmsg" style="display:none;">Data Added / Updated Successfully</label>
      	<label id="updatemsg" style="display:none;">Please Update The Data</label>
        <button type="button" class="btn btn-default" data-dismiss="modal" id="modalclose">Close</button>
        <button type="button" class="btn btn-primary" id="saveButton">Save changes</button>
      </div>
      
    </div>
  </div>
</div>

<script type="text/javascript">

	var Id;
	var status;
	function myfunc(rowId) {
		Id = rowId;
		console.log(Id);
	}
 
 
	var counter = 2;
	
    $("#addButton").click(function () {
    	var newTextBoxDiv = $(document.createElement('div'))
	     .attr("id", 'TextBoxDiv' + counter);

		newTextBoxDiv.after().html('<input type="text" name="key' + counter + 
			      '" id="key' + counter + '" value="" >  ' +
		      '<input type="text" name="value' + counter + 
		      '" id="value' + counter + '" value="" >');
	
		newTextBoxDiv.appendTo("#TextBoxesGroup");
	
		counter++;
    });
    
    $("#saveButton").click(function () {
    	console.log(Id);
    	
    	$.ajax({
    		url: "/saveKeyValue",
    		  type: "POST",
    		  data: {pdname:$("#pdname").val(),
    			  pdsku:$("#pdsku").val(),
    			  pddesc:$("#pddesc").val(),
    			  pdweight:$("#pdweight").val(),
    			  pdselect:$("#pdselect").val(),
    			  pdvisible:$("#pdvisible").val(),
    			  pdshortdesc:$("#pdshortdesc").val(),
    			  pdsearch:$("#pdsearch").val(),
    			  pdquantity:$("#pdquantity").val(),
    			  pdprice:$("#pdprice").val(),
    			  pdmetadesc:$("#pdmetadesc").val(),
    			  pdtaxclass:$("#pdtaxclass").val(),
    			  pdcategories:$("#pdcategories").val(),
    			  pdmetatitle:$("#pdmetatitle").val(),
    			  pdmetakeywords:$("#pdmetakeywords").val(),
    			  pdimages:$("#pdimages").val(),
    			Id:Id},  
    	      success:function(data) {
		    	        console.log('success');
		    	        $("input:text").val("");
		    	        $("textarea").val("");
	    	        	 	 $("#successmsg").css('display','block');
	    	        	 	 $("#updatemsg").css('display','none');
	    	        	 	 $("#successmsg").css('float','left');
    	        	 	setTimeout(function() {
	    	        	 	$("#modalclose").click();
    	        	 	}, 3000);
    	    	}
    	   });
    });
    
    $('.table input[type=checkbox]').click(function(){
        if($(this).is(":checked")) {
        	status = 'true';
        	console.log(status);
        	 $('.table #'+Id).css('display','none'); 
        } else {
        	status = 'false';
        	console.log(status);
         	 $('.table #'+Id).css('display','none'); 
        }
        $.ajax({
    		url: "/changeStatus",
    		  type: "POST",
    		  data: {status:status,
    					Id:Id},  
    	      success:function(data) {
    	        console.log('success');
    	       
    	      }
    	   });
    }); 

    $("#updatebutton").click(function () {
    	console.log(Id);
    	
    	$.ajax({
    		url: "/getValues",
    		  type: "POST",
    		  data: {Id:Id},  
    	      success:function(response) {
		    	        console.log('update form');
		    	        //console.log(response);
		    	        //console.log(response.price);
		    	        
		    	          $("#pdname").val(response.productName),
		    			  $("#pdsku").val(response.sku),
		    			  $("#pddesc").val(response.description),
		    			  $("#pdweight").val(response.weight),
		    			  $("#pdselect").val(response.status),
		    			  $("#pdvisible").val(response.visibility),
		    			  $("#pdshortdesc").val(response.shortDescription),
		    			  $("#pdsearch").val(response.search),
		    			  $("#pdquantity").val(response.quantity),
		    			  $("#pdprice").val(response.price),
		    			  $("#pdmetadesc").val(response.metaDescription),
		    			  $("#pdtaxclass").val(response.taxClass),
		    			  $("#pdcategories").val(response.categories),
		    			  $("#pdmetatitle").val(response.metaTitle),
		    			  $("#pdmetakeywords").val(response.metaKeywords),
		    			  $("#pdimages").val(response.images),

	    	        	 	 $("#successmsg").css('display','none');
	    	        	 	 $("#updatemsg").css('display','block');
	    	        	 	 $("#updatemsg").css('float','left');
    	    	}
    	   });
    });
</script>